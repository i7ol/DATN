<div *ngIf="product" class="max-w-6xl mx-auto p-6">
  <div class="flex flex-col lg:flex-row gap-8 items-start">
    <!-- LEFT: image + thumbnails -->
    <div class="flex-1 flex flex-col items-center">
      <div
        class="w-full md:w-[720px] bg-white rounded overflow-hidden flex items-center justify-center"
        style="min-height: 480px; max-height: 720px"
      >
        <img
          [src]="safeUrl(selectedImage)"
          alt="product"
          class="max-w-full max-h-full object-contain"
        />
      </div>

      <!-- thumbnails ngang -->
      <div class="w-full md:w-[720px] mt-4">
        <div class="flex gap-3 overflow-x-auto py-2 px-1">
          <button
            *ngFor="let img of product.images; let i = index"
            (click)="selectImage(img.url)"
            class="flex-none p-0 rounded-lg transition-transform duration-150"
            [ngClass]="
              selectedImage === img.url
                ? 'scale-110 ring-2 ring-black'
                : 'hover:scale-105'
            "
          >
            <img
              [src]="safeUrl(img.url)"
              alt="thumb-{{ i }}"
              class="w-20 h-20 object-cover rounded-lg border"
            />
          </button>
        </div>
      </div>
    </div>

    <!-- RIGHT: product info -->
    <aside class="w-full lg:w-96 bg-white rounded p-6">
      <span
        class="text-2xl .poppins-regular flex justify-center items-center mb-2"
      >
        {{ product.name }}
      </span>
      <p
        class="text-xl text-black flex justify-center poppins-regular items-center mb-4"
      >
        {{ product.price | number : "1.0-0" }}đ
      </p>

      <div class="mb-4">
        <p class="poppins-regular mb-2">Màu</p>
        <div class="flex flex-wrap gap-2">
          <button
            *ngFor="let c of colors"
            (click)="selectColor(c)"
            class="px-3 py-2 border poppins-regular rounded-md text-sm"
            [ngClass]="selectedColor === c ? 'bg-black text-white' : 'bg-white'"
          >
            {{ c }}
          </button>
        </div>
      </div>
      <div class="mb-4">
        <p class="poppins-regular mb-2">Kích thước</p>

        <div class="flex flex-wrap gap-3">
          <button
            *ngFor="let s of sizes"
            (click)="selectSize(s)"
            class="size-btn poppins-regular"
            [ngClass]="{ active: selectedSize === s }"
          >
            {{ s }}
            <span class="corner-check" *ngIf="selectedSize === s"></span>
          </button>
        </div>
      </div>

      <div class="mt-6 flex flex-col gap-3">
        <button
          class="w-full py-3 poppins-regular bg-white text-black border rounded-lg hover:bg-black hover:text-white transition-all duration-300 ease-out transform hover:-translate-y-1 hover:shadow-lg"
          (click)="addToCart()"
        >
          Thêm vào giỏ hàng
        </button>

        <button
          class="w-full py-3 poppins-regular bg-black text-white border rounded-lg hover:bg-white hover:text-black transition-all duration-300 ease-out transform hover:-translate-y-1 hover:shadow-lg"
        >
          Mua ngay
        </button>
      </div>

      <img
        class="w-full py-3 border rounded-lg mt-3"
        src="assets\img\SizeChart.webp"
        alt=""
      />
    </aside>
  </div>
</div>
