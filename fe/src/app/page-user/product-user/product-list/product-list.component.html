<div class="min-h-screen px-4 md:px-8 py-8 poppins-regular">
  <h1 class="text-2xl font-bold mb-6">Danh sách sản phẩm</h1>

  <div *ngIf="loading" class="text-center py-10">Đang tải sản phẩm...</div>

  <div
    class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6"
    *ngIf="!loading"
  >
    <div
      *ngFor="let product of products"
      class="product-card"
      (click)="product.variants?.length > 1 ? viewProductDetail(product) : null"
    >
      <!-- IMAGE -->
      <div
        class="product-image"
        (click)="viewProductDetail(product); $event.stopPropagation()"
      >
        <img [src]="product.images?.[0]?.url" class="main-image" />
        <img
          *ngIf="product.images?.[1]"
          [src]="product.images?.[1]?.url"
          class="hover-image"
        />
      </div>

      <!-- TITLE + PRICE -->
      <div class="product-info">
        <h2 class="product-name">{{ product.name }}</h2>
        <p class="product-price">{{ product.price | number : "1.0-0" }}đ</p>

        <!-- Button hiển thị theo số lượng biến thể -->
        <ng-container *ngIf="product.variants?.length === 1">
          <button
            (click)="addToCart(product); $event.stopPropagation()"
            class="slide-up-button add-to-cart"
          >
            Thêm vào giỏ hàng
          </button>
        </ng-container>

        <ng-container *ngIf="product.variants?.length > 1">
          <button
            (click)="viewProductDetail(product); $event.stopPropagation()"
            class="slide-up-button detail-button"
          >
            Chi tiết
          </button>
        </ng-container>

        <!-- Trường hợp không có biến thể nào -->
        <ng-container
          *ngIf="!product.variants || product.variants.length === 0"
        >
          <button class="slide-up-button disabled-button" disabled>
            Tạm hết hàng
          </button>
        </ng-container>
      </div>
    </div>
  </div>
</div>
