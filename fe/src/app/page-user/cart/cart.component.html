<div class="max-w-6xl mx-auto py-10 px-4">
  <!-- ================= EMPTY CART ================= -->
  <ng-container *ngIf="(items$ | async)?.length === 0">
    <div class="flex flex-col items-center justify-center py-20">
      <img
        src="./assets/img/empty-cart.webp"
        alt="Empty Cart"
        class="w-64 mb-6 opacity-80"
      />
      <p class="text-gray-500 mb-6">Giỏ hàng của bạn đang trống</p>
      <a
        routerLink="/products"
        class="px-6 py-3 bg-black text-white rounded hover:bg-gray-800 transition"
      >
        Tiếp tục mua sắm
      </a>
    </div>
  </ng-container>

  <!-- ================= CART CONTENT ================= -->
  <ng-container *ngIf="(items$ | async)?.length">
    <div class="grid grid-cols-12 gap-8">
      <!-- ===== LEFT: CART ITEMS ===== -->
      <div class="col-span-12 lg:col-span-8 bg-white rounded-lg shadow p-6">
        <h2 class="text-lg font-semibold mb-6">Giỏ hàng</h2>

        <!-- HEADER -->
        <div
          class="grid grid-cols-12 gap-4 pb-3 border-b text-sm text-gray-500"
        >
          <div class="col-span-5">Sản phẩm</div>
          <div class="col-span-3 text-center">Số lượng</div>
          <div class="col-span-2 text-right">Thành tiền</div>
          <div class="col-span-2 text-right">Xóa</div>
        </div>

        <!-- ITEMS -->
        <div
          *ngFor="let item of items$ | async"
          class="grid grid-cols-12 gap-4 items-center py-4 border-b last:border-0"
        >
          <!-- PRODUCT -->
          <div class="col-span-5">
            <div class="font-medium">{{ item.productName }}</div>
            <div class="text-sm text-gray-500">{{ item.price | number }} đ</div>
          </div>

          <!-- QUANTITY -->
          <div class="col-span-3 flex justify-center items-center gap-3">
            <button
              class="qty-btn"
              (click)="decrease(item)"
              [disabled]="item.quantity <= 1"
            >
              −
            </button>
            <span class="w-6 text-center">{{ item.quantity }}</span>
            <button class="qty-btn" (click)="increase(item)">+</button>
          </div>

          <!-- TOTAL -->
          <div class="col-span-2 text-right font-semibold">
            {{ item.quantity! * item.price! | number }} đ
          </div>

          <!-- REMOVE -->
          <div class="col-span-2 text-right">
            <button
              class="text-red-500 hover:text-red-700"
              (click)="remove(item)"
            >
              <img src="./assets/img/garbage.png" class="w-5 inline-block" />
            </button>
          </div>
        </div>
      </div>

      <!-- ===== RIGHT: SUMMARY ===== -->
      <div
        class="col-span-12 lg:col-span-4 bg-white rounded-lg shadow p-6 h-fit"
      >
        <h2 class="text-lg font-semibold mb-6">Thanh toán</h2>

        <div class="flex justify-between mb-4 text-sm">
          <span>Tạm tính</span>
          <span>{{ totalPrice$ | async | number }} đ</span>
        </div>

        <div class="flex justify-between mb-4 text-sm">
          <span>Phí vận chuyển</span>
          <span>—</span>
        </div>

        <div class="border-t pt-4 flex justify-between font-bold text-lg">
          <span>Tổng tiền</span>
          <span>{{ totalPrice$ | async | number }} đ</span>
        </div>

        <button
          routerLink="/checkout"
          class="w-full mt-6 py-3 bg-black text-white rounded-lg hover:bg-gray-800 transition"
          [disabled]="(items$ | async)?.length === 0"
        >
          Thanh toán
        </button>

        <a
          routerLink="/products"
          class="block text-center mt-4 text-sm text-gray-500 hover:text-black"
        >
          ← Tiếp tục mua sắm
        </a>
      </div>
    </div>
  </ng-container>
</div>
