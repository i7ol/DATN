<div class="auth-modal-container">
  <!-- Close -->
  <button
    mat-icon-button
    class="close-button"
    (click)="closeDialog()"
    aria-label="Close"
  >
    <mat-icon>close</mat-icon>
  </button>

  <mat-tab-group
    [selectedIndex]="isLoginMode ? 0 : 1"
    animationDuration="0ms"
    (selectedTabChange)="onTabChange($event)"
  >
    <!-- ================= LOGIN ================= -->
    <mat-tab label="Đăng nhập">
      <div class="p-6 max-w-md mx-auto">
        <h2 class="text-2xl font-bold mb-2">Chào mừng trở lại</h2>
        <p class="text-gray-600 mb-6">Đăng nhập để tiếp tục mua sắm</p>

        <form [formGroup]="loginForm" (ngSubmit)="onLoginSubmit()">
          <mat-form-field appearance="outline" class="w-full mb-4">
            <mat-label>Tên đăng nhập</mat-label>
            <input matInput formControlName="username" />
          </mat-form-field>

          <mat-form-field appearance="outline" class="w-full mb-6">
            <mat-label>Mật khẩu</mat-label>
            <input matInput type="password" formControlName="password" />
          </mat-form-field>

          <div *ngIf="loginError" class="mb-4 text-red-600 text-sm">
            {{ loginError }}
          </div>

          <button
            mat-raised-button
            color="primary"
            class="w-full py-3"
            [disabled]="loginLoading"
          >
            {{ loginLoading ? "Đang đăng nhập..." : "Đăng nhập" }}
          </button>
        </form>
      </div>
    </mat-tab>

    <!-- ================= REGISTER ================= -->
    <mat-tab label="Đăng ký">
      <div class="p-6 max-w-4xl mx-auto">
        <h2 class="text-2xl font-bold mb-2">Tạo tài khoản mới</h2>
        <p class="text-gray-600 mb-6">Tham gia cùng chúng tôi</p>

        <form [formGroup]="registerForm" (ngSubmit)="onRegisterSubmit()">
          <!-- 2 columns -->
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <mat-form-field appearance="outline">
              <mat-label>Tên đăng nhập *</mat-label>
              <input matInput formControlName="username" />
            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label>Email *</mat-label>
              <input matInput formControlName="email" />
            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label>Mật khẩu *</mat-label>
              <input matInput type="password" formControlName="password" />
            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label>Xác nhận mật khẩu *</mat-label>
              <input
                matInput
                type="password"
                formControlName="confirmPassword"
              />
            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label>Số điện thoại</mat-label>
              <input matInput formControlName="phone" />
            </mat-form-field>

            <div></div>
          </div>

          <!-- Address -->
          <mat-form-field appearance="outline" class="w-full mt-4">
            <mat-label>Địa chỉ chi tiết</mat-label>
            <input matInput formControlName="addressDetail" />
          </mat-form-field>

          <div *ngIf="registerError" class="text-red-600 mt-3 text-sm">
            {{ registerError }}
          </div>

          <button
            mat-raised-button
            color="primary"
            class="w-full py-3 mt-6"
            [disabled]="registerLoading"
          >
            {{ registerLoading ? "Đang đăng ký..." : "Đăng ký" }}
          </button>
        </form>
      </div>
    </mat-tab>
  </mat-tab-group>
</div>
